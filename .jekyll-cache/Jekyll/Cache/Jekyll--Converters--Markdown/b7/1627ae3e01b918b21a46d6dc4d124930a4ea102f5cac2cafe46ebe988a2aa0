I"[é<h1 id="íŒŒì´ì¬-í•¨ìˆ˜-ë§Œë“¤ê¸°">íŒŒì´ì¬ í•¨ìˆ˜ ë§Œë“¤ê¸°</h1>

<h2 id="1-best-practices">1. Best Practices</h2>
<p><br /></p>
<h4 id="docstring">Docstring</h4>
<ul>
  <li>í•¨ìˆ˜ì˜ ê¸°ëŠ¥</li>
  <li>ì¸ìˆ˜</li>
  <li>ë°˜í™˜ ê°’</li>
  <li>ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì— ëŒ€í•œ ì •ë³´</li>
  <li>í•¨ìˆ˜ì— ëŒ€í•´ ë§í•˜ê³  ì‹¶ì€ ëª¨ë“  ê²ƒ</li>
</ul>

<h3 id="docstring-formats">Docstring formats</h3>

<ul>
  <li>Google Style</li>
  <li>Numpydoc</li>
  <li>reStructedText</li>
  <li>EpyText</li>
</ul>

<h3 id="google-style">Google Style</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">arg_1</span><span class="p">,</span> <span class="n">arg_2</span> <span class="o">=</span> <span class="mi">42</span><span class="p">):</span>
    <span class="s">"""Description of what the function does.
    
    Args:
    	arg_1 (str) : Description of arg_1 that can break onto the next line if needed.
    	arg_2 (int, optional) : Write optional when an argument has a default value.
    	
    Returns:
    	bool: Optional description of the return value
    	Extra lines are not indented.
    	
    Raises:
    	ValueError : Include any error types that the function intentionally raise
    	
    Notes:
    	See https://www.datacamp.com/community/tutorials/docstrings-python
    """</span>
</code></pre></div></div>

<h3 id="numpydoc">Numpydoc</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">arg_1</span><span class="p">,</span> <span class="n">arg_2</span><span class="o">=</span><span class="mi">42</span><span class="p">):</span>
    <span class="s">"""
    Description of what the function does.
    
    Parameters
    ----------
    arg_1 : expected type of arg_1
    	Description of arg_1
    arg_2 : int, optional
    	Write optional when an argumenthas a default value.
    	Default=42.
    
    Returns
    -------
    The type of the return value
    	Can include a description of the return value.
    	Replace "Returns" with "Yields" if this function is a generators.
    """</span>
</code></pre></div></div>

<h3 id="retrieving-docstrings">Retrieving docstrings</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">the_answer</span><span class="p">():</span>
    <span class="s">"""Return the answer to life, the universe, and everything.
    
    Returns:
    	int
    """</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">function.__doc__</code> ë¥¼í†µí•´ docsí™•ì¸ ê°€ëŠ¥</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">inspect</span>
<span class="n">docstring</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">.</span><span class="n">getdoc</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="dont-repeat-yourself--dry-">Donâ€™t repeat yourself ( DRY )</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"train.csv"</span><span class="p">)</span>
<span class="n">train_Y</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="s">'labels'</span><span class="p">].</span><span class="n">values</span>
<span class="n">train_X</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="ow">in</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">train</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span><span class="s">'labels'</span><span class="p">].</span><span class="n">values</span>
<span class="n">train_pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span> <span class="o">=</span> <span class="mi">2</span><span class="p">).</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">train_X</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">train_pac</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">train_pca</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>

<span class="n">val</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"val.csv"</span><span class="p">)</span>
<span class="n">val_Y</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="s">'labels'</span><span class="p">].</span><span class="n">values</span>
<span class="n">val_X</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="ow">in</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">val</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span><span class="s">'labels'</span><span class="p">].</span><span class="n">values</span>
<span class="n">val_pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span> <span class="o">=</span> <span class="mi">2</span><span class="p">).</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">val_pca</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">val_pca</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"test.csv"</span><span class="p">)</span>
<span class="n">test_Y</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="s">'labels'</span><span class="p">].</span><span class="n">values</span>
<span class="n">test_X</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="ow">in</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">test</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span><span class="s">'labels'</span><span class="p">].</span><span class="n">values</span>
<span class="n">test_pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span> <span class="o">=</span> <span class="mi">2</span><span class="p">).</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">test_pac</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">test_pca</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></div>

<p>ìœ„ ì½”ë“œë¥¼ ë³´ë©´ train, val, test ì„¸ê°œì˜ ë˜‘ê°™ì€ ì½”ë“œê°€ ë°˜ë³µ</p>

<h5 id="ë°˜ë³µí–ˆì„-ë•Œ-ë¬¸ì œì ">ë°˜ë³µí–ˆì„ ë•Œ ë¬¸ì œì </h5>

<ul>
  <li>ì‹¤ìˆ˜ë¥¼ ë°œê²¬í•˜ê¸° ì–´ë µë‹¤.</li>
  <li>ë³€ê²½í•´ì•¼ í•  ë•Œ, ì—¬ëŸ¬ê³³ì—ì„œ ë³€ê²½í•´ì•¼ í•œë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">load_and_plot</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="s">"""Load a data set and plot the first two principal components.
    
    Args:
    	path (str): The location of a CSV file.
    	
    Returns:
    	tuple of ndarray: (features, labels)
    """</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'label'</span><span class="p">].</span><span class="n">values</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span> <span class="s">'label'</span><span class="p">].</span><span class="n">values</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span> <span class="o">=</span> <span class="mi">2</span><span class="p">).</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pca</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">pca</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span>

<span class="n">train_X</span><span class="p">,</span> <span class="n">train_y</span> <span class="o">=</span> <span class="n">load_and_plot</span><span class="p">(</span><span class="s">"train.csv"</span><span class="p">)</span>
<span class="n">val_X</span><span class="p">,</span> <span class="n">val_y</span> <span class="o">=</span> <span class="n">load_and_plot</span><span class="p">(</span><span class="s">"val.csv"</span><span class="p">)</span>
<span class="n">test_X</span><span class="p">,</span> <span class="n">test_y</span> <span class="o">=</span> <span class="n">load_and_plot</span><span class="p">(</span><span class="s">"test.csv"</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="do-one-thing">Do One Thing</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="s">"""Load a data set.
    
    Args:
    	path (str): The location of a CSV file.
    	
    Returns:
    	tuple of ndarray: (features, labels)
    """</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'label'</span><span class="p">].</span><span class="n">values</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="o">!=</span> <span class="s">'label'</span><span class="p">].</span><span class="n">values</span>
    <span class="k">return</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">plot_data</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="s">"""Plot the first two principal components of a matrix.
    
    Args:
    	X (numpy.ndarray): The data to plot.
    """</span>
    <span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">).</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pca</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">pca</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></div>

<h4 id="í•¨ìˆ˜ë¥¼-ë‚˜ëˆ„ë©´ì„œ-ì–»ê²Œ-ë˜ëŠ”-ì¥ì ">í•¨ìˆ˜ë¥¼ ë‚˜ëˆ„ë©´ì„œ ì–»ê²Œ ë˜ëŠ” ì¥ì </h4>

<ul>
  <li>ì½”ë“œê°€ ìœ ì—°í•´ì§„ë‹¤. ( ë‘˜ì¤‘ í•œê°€ì§€ ì¼ë§Œ í•˜ê³  ì‹¶ì„ ë•Œ, ììœ ë¡­ê²Œ ê°€ëŠ¥ )</li>
  <li>ì´í•´í•˜ê¸° ì‰½ë‹¤ + í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê·¸ê°€ ë” ì‰½ë‹¤.</li>
</ul>

<h4 id="pass-by-assignment">Pass by assignment</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">a</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>

<span class="n">b</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">42</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div></div>

<hr />

<h2 id="2-context-managers">2. Context Managers</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="o">&lt;</span><span class="n">context</span><span class="o">-</span><span class="n">manager</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">variable</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="c1"># Run your code here
</span>    <span class="c1"># This code is running "inside the context"
</span>    
<span class="s">"This code runs after the context is removed"</span>
</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"my_file.txt"</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_file</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">my_file</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    
<span class="k">print</span><span class="p">(</span><span class="s">'The file is {} characters long'</span><span class="p">.</span> <span class="nb">format</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">contextlib</span><span class="p">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">my_context</span><span class="p">():</span>
    <span class="c1">#Add any set up code you need
</span>    <span class="k">yield</span> 
    <span class="c1"># Add any teardown code you need
</span></code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">contextlib</span>

<span class="o">@</span><span class="n">contextlib</span><span class="p">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">my_context</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">42</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"goodbye"</span><span class="p">)</span>

<span class="k">with</span> <span class="n">my_context</span><span class="p">()</span> <span class="k">as</span> <span class="n">foo</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"foo is {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>
    
<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">hello</span>
<span class="n">foo</span> <span class="ow">is</span> <span class="mi">42</span>
<span class="n">goodbye</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">contextlib</span><span class="p">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
	<span class="c1"># set up database connection
</span>    <span class="n">db</span> <span class="o">=</span> <span class="n">postgres</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">db</span>
    <span class="c1"># tear down database connection
</span>    <span class="n">db</span><span class="p">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"http://datacamp.com/data"</span>
<span class="k">with</span> <span class="n">database</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_db</span><span class="p">:</span>
    <span class="n">course_list</span> <span class="o">=</span> <span class="n">my_db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s">'SELECT * FROM courses'</span>
    <span class="p">)</span>
</code></pre></div></div>

<h4 id="handling-errors">Handling errors</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="c1"># code that might raise an error
</span><span class="k">except</span><span class="p">:</span>
    <span class="c1"># do something about the error
</span><span class="k">finally</span><span class="p">:</span>
    <span class="c1"># this code runs no matter what
</span>    
<span class="o">-------------------------------------</span>
<span class="k">def</span> <span class="nf">get_printer</span><span class="p">(</span><span class="n">ip</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">connect_to_printer</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">p</span><span class="p">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"disconnected from printer"</span><span class="p">)</span>
<span class="n">doc</span> <span class="o">=</span> <span class="p">{</span><span class="s">"text"</span><span class="p">:</span> <span class="s">"This is my text."</span><span class="p">}</span>

<span class="k">with</span> <span class="n">get_printer</span><span class="p">(</span><span class="s">"10.0.34.111"</span><span class="p">)</span> <span class="k">as</span> <span class="n">printer</span><span class="p">:</span>
    <span class="n">printer</span><span class="p">.</span><span class="n">print_page</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s">'text'</span><span class="p">])</span>
</code></pre></div></div>

<h2 id="3-decorators">3. Decorators</h2>
<p><br /></p>

<h4 id="functions-as-variables">Functions as variables</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Hello'</span><span class="p">)</span>
    
<span class="n">x</span> <span class="o">=</span> <span class="n">my_function</span>
<span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="o">&lt;</span><span class="nb">type</span> <span class="s">'function'</span><span class="o">&gt;</span>
<span class="o">----------------------</span>
<span class="n">x</span><span class="p">()</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">Hello</span>
<span class="o">----------------------</span>
<span class="n">PrintMcPrintface</span> <span class="o">=</span> <span class="k">print</span>
<span class="n">PrintMcPrintface</span><span class="p">(</span><span class="s">'Python is awesome!'</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">Python</span> <span class="ow">is</span> <span class="n">awesome</span><span class="err">!</span>
</code></pre></div></div>

<h4 id="list-and-dictionaries-of-functions">List and dictionaries of functions</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list_of_functions</span> <span class="o">=</span> <span class="p">[</span><span class="n">my_function</span><span class="p">,</span> <span class="nb">open</span><span class="p">,</span> <span class="k">print</span><span class="p">]</span>
<span class="n">list_of_functions</span><span class="p">[</span><span class="mi">2</span><span class="p">](</span><span class="s">'I am printing with an element of a list'</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">I</span> <span class="n">am</span> <span class="n">printing</span> <span class="k">with</span> <span class="n">an</span> <span class="n">element</span> <span class="n">of</span> <span class="n">a</span> <span class="nb">list</span>
<span class="o">----------------------------------------------------------------</span>
<span class="n">dict_of_functions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'func1'</span> <span class="p">:</span> <span class="n">my_function</span><span class="p">,</span>
    <span class="s">'func2'</span> <span class="p">:</span> <span class="nb">open</span><span class="p">,</span>
    <span class="s">'func3'</span> <span class="p">:</span> <span class="k">print</span>
<span class="p">}</span>
<span class="n">dict_of_functions</span><span class="p">[</span><span class="s">'func3'</span><span class="p">](</span><span class="s">'I am printing with a value of dict!'</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="referencing-a-function">Referencing a function</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">42</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">my_function</span>
<span class="n">my_function</span><span class="p">()</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">42</span>
<span class="o">---------------------</span>
<span class="n">my_function</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">__main__</span><span class="p">.</span><span class="n">my_function</span><span class="o">&gt;</span>
</code></pre></div></div>

<h4 id="functions-as-arguments">Functions as arguments</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">has_docstring</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="s">"""Check to see if the function
    'func' has a docstring.

    Args:
        func (callable): A function.
    
    Returns:
        bool
    """</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">.</span><span class="n">__doc__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">no</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">42</span>

<span class="k">def</span> <span class="nf">yes</span><span class="p">():</span>
    <span class="s">"""Return the value 42
    """</span>
    <span class="k">return</span> <span class="mi">42</span>

<span class="n">has_docstring</span><span class="p">(</span><span class="n">no</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="bp">False</span>
<span class="o">------------------------------------</span>
<span class="n">has_docstring</span><span class="p">(</span><span class="n">yes</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="bp">True</span>
</code></pre></div></div>

<h4 id="defining-a--function-inside-another-function">Defining a  function inside another function</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
<span class="o">-------------------------</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">in_range</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;</span><span class="mi">10</span>
   	<span class="k">if</span> <span class="n">in_range</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">in_range</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="functions-as-return-values">Functions as return values</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_function</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">print_me</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">print_me</span>

<span class="n">new_func</span> <span class="o">=</span> <span class="n">get_function</span><span class="p">()</span>
<span class="n">new_func</span><span class="p">(</span><span class="s">'This is a sentence.'</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">sentence</span><span class="p">.</span>
</code></pre></div></div>

<h4 id="scope">Scope</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">200</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">7</span>
<span class="o">-------------</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">42</span>
<span class="mi">200</span>
<span class="o">---------------</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">7</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">foo</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">42</span>
<span class="mi">42</span>
<span class="o">-------------------</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
  <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
  <span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
  	<span class="k">nonlocal</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="n">bar</span><span class="p">()</span>
  <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">foo</span><span class="p">()</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">200</span>
<span class="mi">200</span>
</code></pre></div></div>

<h4 id="closures">Closures</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bar</span>

<span class="n">func</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">func</span><span class="p">.</span><span class="n">__closure__</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">func</span><span class="p">.</span><span class="n">__closure__</span><span class="p">))</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">5</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">tuple</span><span class="s">'&gt;
1
</span></code></pre></div></div>

<h4 id="definitions---nested-function">Definitions - nested function</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># outer function
</span><span class="k">def</span> <span class="nf">parent</span><span class="p">():</span>
    <span class="c1"># nested function
</span>    <span class="k">def</span> <span class="nf">child</span><span class="p">():</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">child</span>
</code></pre></div></div>

<h4 id="definitions---nonlocal-variables">Definitions - nonlocal variables</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="n">arg_1</span><span class="p">,</span> <span class="n">arg_2</span><span class="p">):</span>
    <span class="c1"># From child()'s point of view,
</span>    <span class="c1"># 'value' and 'my_dict' are nonlocal variables,
</span>    <span class="c1"># as are 'arg_1' and 'arg_2'
</span>    <span class="n">value</span> <span class="o">=</span><span class="mi">22</span>
    <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">'chocolate'</span><span class="p">:</span><span class="s">'yummy'</span><span class="p">}</span>
    
    <span class="k">def</span> <span class="nf">child</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">my_dict</span><span class="p">[</span><span class="s">'chocolate'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="n">arg_1</span> <span class="o">+</span> <span class="n">arg_2</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">child</span>
</code></pre></div></div>

<h4 id="closure--nonlocal-variables-attached-to-a-returned-function">Closure : Nonlocal variables attached to a returned function.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="n">arg_1</span><span class="p">,</span> <span class="n">arg_2</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">'chocolate'</span><span class="p">:</span><span class="s">'yummy'</span><span class="p">}</span>
    
    <span class="k">def</span> <span class="nf">child</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">my_dict</span><span class="p">[</span><span class="s">'chocolate'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="n">arg_1</span><span class="o">+</span><span class="n">arg_2</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">child</span>

<span class="n">new_function</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="k">print</span><span class="p">([</span><span class="n">cell</span><span class="p">.</span><span class="n">cell_contents</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">new_function</span><span class="p">.</span><span class="n">__closure__</span><span class="p">])</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">{</span><span class="s">'chocolate'</span><span class="p">:</span> <span class="s">'yummy'</span><span class="p">},</span> <span class="mi">22</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="decorators">Decorators</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">double_args</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span>

<span class="n">multiply</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span>
<span class="k">def</span> <span class="nf">double_args</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="c1"># Define a new function that we can modify
</span>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
        <span class="c1"># For now, just call the unmodified function
</span>        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="n">b</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="n">new_multiply</span> <span class="o">=</span> <span class="n">double_args</span><span class="p">(</span><span class="n">multiply</span><span class="p">)</span>
<span class="n">new_multiply</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">20</span>
</code></pre></div></div>

<hr />

<h2 id="4-real-world-examples">4. Real-world examples</h2>
<p><br /></p>

<h4 id="time-a-function">Time a function</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">timer</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="s">"""A decorator that print show how long a function took to run."""</span>
    <span class="c1"># Define the wrapper function to return.
</span>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># When wrapper() is called, get the current time.
</span>        <span class="n">t_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># Call the decorated function and store the result.
</span>        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Get the total time it took to run, and print it
</span>        <span class="n">t_total</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t_start</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'{} took {}s'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">func</span><span class="p">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">t_total</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="o">@</span><span class="n">timer</span>
<span class="k">def</span> <span class="nf">sleep_n_seconds</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="n">sleep_n_seconds</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">sleep_n_seconds</span> <span class="n">took</span> <span class="mf">5.005098819732666</span><span class="n">s</span>
</code></pre></div></div>

<h4 id="decorators-and-metadata">Decorators and metadata</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">timer</span>
<span class="k">def</span> <span class="nf">sleep_n_seconds</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="s">"""Pause processing for n seconds.
    Args"
        n (int): The number of seconds to pause for.
    """</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sleep_n_seconds</span><span class="p">.</span><span class="n">__doc__</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sleep_n_seconds</span><span class="p">.</span><span class="n">__name__</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="bp">None</span>
<span class="n">wrapper</span>
</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="k">def</span> <span class="nf">timer</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="s">"""A decorator that print show how long a function took to run."""</span>

    <span class="o">@</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">t_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">t_total</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t_start</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'{} took {}s'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">func</span><span class="p">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">t_total</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>
     <span class="k">return</span> <span class="n">wrapper</span>

<span class="o">@</span><span class="n">timer</span>
<span class="k">def</span> <span class="nf">sleep_n_seconds</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="s">"""Pause processing for n seconds.

    Args"
        n (int): The number of seconds to pause for.
    """</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sleep_n_seconds</span><span class="p">.</span><span class="n">__doc__</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sleep_n_seconds</span><span class="p">.</span><span class="n">__name__</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">Pause</span> <span class="n">processing</span> <span class="k">for</span> <span class="n">n</span> <span class="n">seconds</span><span class="p">.</span>

    <span class="n">Args</span><span class="s">"
        n (int): The number of seconds to pause for.
    
sleep_n_seconds
</span></code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># closuresë¥¼ í†µí•´ì„œë„ ê°€ëŠ¥í•˜ì§€ë§Œ ë‹¤ìŒ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ì‰¬ì›€
</span><span class="o">@</span><span class="n">timer</span>
<span class="k">def</span> <span class="nf">sleep_n_seconds</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="s">"""Pause processing for n seconds.

    Args"
        n (int): The number of seconds to pause for.
    """</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sleep_n_seconds</span><span class="p">.</span><span class="n">__wrapped__</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">sleep_n_seconds</span> <span class="n">at</span> <span class="mh">0x7f3245720cb0</span><span class="o">&gt;</span>
</code></pre></div></div>

<h4 id="decorators-that-take-arguments">Decorators that take arguments</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">run_three_times</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="o">@</span><span class="n">run_three_times</span>
<span class="k">def</span> <span class="nf">print_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="n">print_sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">8</span>
<span class="mi">8</span>
<span class="mi">8</span>
</code></pre></div></div>

<h4 id="run_n_times">run_n_times()</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">run_n_times</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Define and return a decorator"""</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>

<span class="o">@</span><span class="n">run_n_times</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">print_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="n">print_sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="n">run_three_times</span> <span class="o">=</span> <span class="n">run_n_times</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">@</span><span class="n">run_three_times</span>
<span class="k">def</span> <span class="nf">print_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="n">print_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="mi">8</span>
<span class="mi">8</span>
<span class="mi">8</span>
<span class="mi">4</span>
<span class="mi">4</span>
<span class="mi">4</span>
</code></pre></div></div>

<h3 id="timeout-a-real-world-example">Timeout(): a real world example</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">signal</span>

<span class="k">def</span> <span class="nf">raise_timeout</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">raise</span> <span class="nb">TimeoutError</span><span class="p">()</span>
<span class="c1"># When an "alarm" signal goes off, call raise_timeout()
</span><span class="n">signal</span><span class="p">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signalnum</span> <span class="o">=</span> <span class="n">signal</span><span class="p">.</span><span class="n">SIGALRM</span><span class="p">,</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">raise_timeout</span><span class="p">)</span>
<span class="c1"># Set off an alarm in 5 seconds
</span><span class="n">signal</span><span class="p">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># Cancel the alarm
</span><span class="n">signal</span><span class="p">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">timeout_in_5s</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="o">@</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Set an alarm for 5 seconds
</span>        <span class="n">signal</span><span class="p">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Call the decorated func
</span>            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Cancel alarm
</span>            <span class="n">signal</span><span class="p">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="o">@</span><span class="n">timeout_in_5s</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'foo!'</span><span class="p">)</span>
    
<span class="n">foo</span><span class="p">()</span>

<span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="nb">TimeoutError</span><span class="p">:</span> 
</code></pre></div></div>

:ET